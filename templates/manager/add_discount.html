<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Add Discount - {{ restaurant.restaurant_name }}</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .container {
        max-width: 600px;
        margin: 0 auto;
      }
      .form-group {
        margin-bottom: 15px;
      }
      label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
      }
      input,
      select {
        width: 100%;
        padding: 8px;
        box-sizing: border-box;
      }
      .checkbox-group {
        max-height: 200px;
        overflow-y: auto;
        border: 1px solid #ddd;
        padding: 10px;
        margin-top: 5px;
      }
      .checkbox-item {
        margin-bottom: 5px;
      }
      button {
        padding: 10px 15px;
        background-color: #4caf50;
        color: white;
        border: none;
        cursor: pointer;
      }
      button:hover {
        background-color: #45a049;
      }
      .btn-secondary {
        background-color: #6c757d;
      }
      .btn-secondary:hover {
        background-color: #5a6268;
      }
    </style>
  </head>
  <body>
    <nav style="text-align: right; margin: 10px">
      <form
        method="post"
        action="{{ url_for('logout') }}"
        style="display: inline"
      >
        <button type="submit">Log Out</button>
      </form>
    </nav>

    <div class="container">
      <h1>Add Discount for {{ restaurant.restaurant_name }}</h1>

      <form
        action="{{ url_for('add_discount', restaurant_id=restaurant.restaurant_id) }}"
        method="post"
      >
        <div class="form-group">
          <label for="discount_rate">Discount Rate (%):</label>
          <input
            type="number"
            id="discount_rate"
            name="discount_rate"
            min="1"
            max="99"
            required
          />
        </div>

        <div class="form-group">
          <label for="start_date">Start Date:</label>
          <input type="date" id="start_date" name="start_date" required />
        </div>

        <div class="form-group">
          <label for="end_date">End Date:</label>
          <input type="date" id="end_date" name="end_date" required />
        </div>

        <div class="form-group">
          <label>Select Menu Items:</label>
          <div class="checkbox-group">
            {% for menu in menu_items %}
            <div class="checkbox-item">
              <input
                type="checkbox"
                id="menu_item_{{ menu.id }}"
                name="menu_item_ids"
                value="{{ menu.id }}"
              />
              <label for="menu_item_{{ menu.id }}"
                >{{ menu.name }} - {{ menu.price }} TL</label
              >
            </div>
            {% endfor %}
          </div>
        </div>

        <div class="form-group">
          <button type="submit">Create Discount</button>
          <a
            href="{{ url_for('restaurant_discounts', restaurant_id=restaurant.restaurant_id) }}"
            class="btn btn-secondary"
            style="text-decoration: none; padding: 10px 15px; margin-left: 10px"
            >Cancel</a
          >
        </div>
      </form>
    </div>

    <script>
      // Set default start date to today
      document.getElementById("start_date").valueAsDate = new Date();

      // Set default end date to 30 days from today
      const end = new Date();
      end.setDate(end.getDate() + 30);
      document.getElementById("end_date").valueAsDate = end;
    </script>
  </body>
</html>
